<div class="project_edit projects-container">
    <div class="projects-menu clearfix">
        <div ngbDropdown class="d-inline-block pull-left" #drop="ngbDropdown" (mouseenter)="drop.open()" (mouseleave)="drop.close()">
            <a ngbDropdownToggle class="btn btn-add btn-custom btn-white dropdown-toggle add-media-file-dropdown" id="add-media-file-dropdown">
                <svg class="svgIcon" width="30" height="30" viewBox="-3 -3 30 30" enable-background="new -3 -3 30 30"><path d="M17 10h-3v-3c0-1.1-.9-2-2-2s-2 .9-2 2v3h-3c-1.1 0-2 .9-2 2s.9 2 2 2h3v3c0 1.1.9 2 2 2s2-.9 2-2v-3h3c1.1 0 2-.9 2-2s-.9-2-2-2z"></path></svg>
                <span>Add Media Files</span>
            </a>
            
            <ul ngbDropdownMenu class="dropdown-menu media-menu" aria-labelledby="add-media-file-dropdown" style="min-width: 100px;">
                <li>
                    <ng5-files-click (filesSelect)="filesSelect($event)" multiple="multiple" class="menu-item dropdown-item">
                        <div>
                            <img class="icon" src="../../../../../assets/layout/icons/cloud-computing.png">
                            <span>Computer</span>
                        </div>
                    </ng5-files-click>
                    <!-- <a href id="dropbox_first" ng-show="connectionStates.dropbox" drop-box-picker db-picker-files="dpfiles" class="menu-item">
                        <img class="icon" src="assets/icons/dropbox.png">
                        <span>Dropbox</span>
                    </a>
                    <a href id="dropbox_second" ng-hide="connectionStates.dropbox" ng-click="showConnectToService('dropbox')" class="menu-item">
                        <img class="icon" src="assets/icons/dropbox.png">
                        <span>Dropbox</span>
                    </a>

                    <a href id="google_drive_first" ng-show="connectionStates.google_drive" lk-google-picker on-picked="onGoogleFilePicked(docs)" on-loaded="onGoogleFileLoaded()" on-cancel="onGoogleFileCancel()" class="menu-item">
                        <img class="icon" src="assets/icons/drive.png">
                        <span>Google Drive</span>
                    </a>
                    <a href id="google_drive_second" ng-hide="connectionStates.google_drive" ng-click="showConnectToService('google_drive')" class="menu-item">
                        <img class="icon" src="assets/icons/drive.png">
                        <span>Google Drive</span>
                    </a>

                    <a href id="box_first" ng-show="connectionStates.box" box-picker box-picker-files="boxfiles" class="menu-item icon-big">
                        <img class="icon" src="assets/icons/box.png">
                        <span>Box</span>
                    </a>
                    <a href id="box_second" ng-hide="connectionStates.box" ng-click="showConnectToService('box')" class="menu-item icon-big">
                        <img class="icon" src="assets/icons/box.png">
                        <span>Box</span>
                    </a>


                    <a href id="instagram_first" ng-show="connectionStates.instagram2" ng-click="instagram()"  class="menu-item">
                        <img class="icon" src="assets/icons/instagram.png">
                        <span>Instagram</span>
                    </a>
                    <a href id="instagram_second" ng-hide="connectionStates.instagram2" ng-click="showConnectToService('instagram2')" class="menu-item">
                        <img class="icon" src="assets/icons/instagram.png">
                        <span>Instagram</span>
                    </a> -->
                    <!-- <a href custom-link-invoker is-editing="custom_link_editing" ng-click="customFileType = 'youtube'" class="menu-item icon-big">
                        <img class="icon" src="assets/icons/youtube.png">
                        <span>Youtube</span>
                    </a> -->
                    <!-- <a href custom-link-invoker is-editing="custom_link_editing" ng-click="customFileType = 'custom'" class="menu-item">
                        <img class="icon" src="assets/icons/url-link.png">
                        <span>URL</span>
                    </a> -->
                </li>
                <!-- <li custom-link-invoker is-editing="custom_link_editing" class="link" ng-show="custom_link_editing">
                    <div class="custom-link-wrapper" ng-class="{'bg-youtube': customFileType == 'youtube'}">
                        <form ng-submit="saveCustomFile(customFileType)">
                            <input class="custom-link-box"  type="text" ng-model="url" placeholder="Paste URL" />
                        </form>
                    </div>
                </li> -->
            </ul>
        </div>
        <div class="d-inline-block pull-left" style="margin-left: 10px" *ngIf="props.media.length != 0 && props.isUploading == false">
            <a class="btn btn-add btn-custom btn-white btn-edit-project" href="/video-studio/{{props.projectId}}">
                <svg class="svgIcon" width="30" height="30" viewBox="-9 -9 30 30" enable-background="new -9 -9 30 30"><path d="M11.9 3c-.4-.6-.8-1.1-1.3-1.6-.5-.4-1-.9-1.7-1.3-.3-.2-.5-.1-.7.1l-6.6 6.6c-.1.1-.2.2-.2.3-.8 2.5-1.3 3.9-1.4 4.2-.1.2 0 .4.1.5.2.1.3.2.4.2h.2c1.1-.4 2.6-.9 4.3-1.4.1 0 .2-.1.2-.1l6.6-6.6c.1-.2.2-.4.2-.5s0-.3-.1-.4zm-9.9 8c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z"></path></svg>
                <span>Edit</span>
            </a>
        </div>
        <div class="float-right menu-right">
            <a target="_self" id="downloadButton" (click)="downloadProjectVideo()" class="menu-item" [ngClass]="props.disableDownloadButton ? 'disabled' : ''">
                <div class="icon-holder">
                    <img src="../../../../../assets/layout/icons/arrow-down-line.png" />
                </div>
                <span>Download</span>
            </a>
            <div href (click)="playProjectVideo()" class="menu-item" [ngClass]="props.disableDownloadButton ? 'disabled' : ''" style="cursor: pointer">
                <div class="icon-holder">
                    <img src="../../../../../assets/layout/icons/icon-play.png" />
                </div>
                <span>Play</span>
            </div>
            <!-- <span class="btn-group" ngbDropdown placement="bottom-right">
                <a class="menu-item dropdown-toggle" ngbDropdownToggle>
                    <div class="icon-holder">
                        <img src="../../../../../assets/layout/icons/icon-share-green.png" />
                    </div>
                    <span>Share</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-right menu-social" ngbDropdownMenu>
                    <li ng-show="$parent.user.snapchat">                   
                        <div ng-click="openShareModal('snapchat')" class="dropdown-sharelink" >
                            <img class="dropdown-sharelink-img" src="../../../../../assets/layout/icons/snapchat-btn.png">
                            <span> Send to Snapchat</span>
                        </div>
                    </li>
                    <li ng-show="$parent.user.facebook">      
                         <div ng-click="openShareModal('facebook')" class="dropdown-sharelink">
                            <img class="dropdown-sharelink-img" src="../../../../../assets/layout/icons/facebook-btn.png">
                            <span> Share to Facebook</span>
                        </div>      
                     </li>
                    <li ng-show="$parent.user.twitter">   
                         <div ng-click="openShareModal('twitter')"  class="dropdown-sharelink">
                            <img class="dropdown-sharelink-img" src="../../../../../assets/layout/icons/twitter-btn.png">                    
                            <span> Send to Twitter</span>
                        </div>
                     </li>
                    <li ng-show="$parent.user.instagram">   
                         <div ng-click="openShareModal('instagram')"  class="dropdown-sharelink">
                            <img class="dropdown-sharelink-img" src="../../../../../assets/layout/icons/instagram-btn.png">                    
                            <span> Send to Instagram</span>
                        </div>                     
                    </li>
                    <li ng-show="$parent.user.pinterest">
                        <div ng-click="openShareModal('pinterest')" class="dropdown-sharelink" >
                            <img class="dropdown-sharelink-img" src="../../../../../assets/layout/icons/pinterest-btn.png">
                            <span> Pin to Pinterest</span>
                        </div>
                    </li>
                    <li class="divider"></li>                       
                    <li>
                        <div ng-click="openShareModal('twitter')"  class="dropdown-sharelink">
                            <img class="dropdown-sharelink-img" src="../../../../../assets/layout/icons/schedule-btn.png">
                            <span> Schedule Post</span>
                        </div>           
                    </li>                            
                </ul>
            </span> -->
        </div>
    </div>
    
    <div>
        <ng5-files-drop (filesSelect)="filesSelect($event)" (dragenter)="onDragEnter($event)" (dragleave)="onDragLeave($event)" (drop)="onDrop($event)">
            <div class="pointerEvents-none position-relative" style="z-index: 901;">
                <div style="transition: opacity 150ms ease-in-out;" [ngStyle]="{'opacity': props.isDragAvailable ? '1' : '0'}">
                    <div class="position-fixed pinAll" [ngClass]="props.isDragAvailable ? '' : 'pointerEvents-none'" style="background: rgba(255, 255, 255, 0.8);">
                        <div class="type__absolute___3D3rm position-absolute location__center___1LDaN pinCenter width-100">
                            <div class="">
                                <div class="type__center___1qmwE textAlign-center">
                                    <div style="transition: transform 300ms cubic-bezier(0.075, 0.82, 0.165, 1);" [ngStyle]="{'opacity': props.isDragAvailable ? '1' : '0', 'transform': 'scale(' + (props.isDragAvailable ? '1' : '0') + ')'}">
                                        <div class="bg-smoke borderRadius-circle display-inlineBlock" style="width: 600px; height: 600px;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="type__absolute___3D3rm position-absolute location__center___1LDaN pinCenter width-100">
                            <div class="">
                                <div class="type__center___1qmwE textAlign-center">
                                    <div style="transition: transform 300ms cubic-bezier(0.075, 0.82, 0.165, 1);" [ngStyle]="{'opacity': props.isDragAvailable ? '1' : '0', 'transform': 'scale(' + (props.isDragAvailable ? '1' : '0') + ')'}">
                                        <svg class="fill-smoke--xd" width="30" height="30" viewBox="0 0 30 30" style="width: 100px; height: 100px; margin-bottom: 120px;">
                                            <path d="M15 0c-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15s15-6.716 15-15c0-8.284-6.716-15-15-15zm7.376 15.069c-2.597 4.053-6.654 7.591-6.817 7.732-.324.265-.793.265-1.1 0-.18-.141-4.165-3.627-6.761-7.644-.126-.141-.198-.318-.198-.531 0-.46.378-.832.848-.832h3.318c.397-2.584.992-5.202 1.208-5.609.396-.707 1.063-1.185 2.127-1.185 1.045 0 1.713.478 2.11 1.186.234.406.812 3.025 1.208 5.609h3.336c.306 0 .595.159.738.424.145.266.145.584-.017.85z"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="type__absolute___3D3rm position-absolute location__center___1LDaN pinCenter width-100">
                            <div class="">
                                <div class="type__center___1qmwE textAlign-center">
                                    <div style="transition: opacity 150ms ease-in-out;" [ngStyle]="{'opacity': props.isDragAvailable ? '1' : '0'}">
                                        <div style="margin-top: 150px;">
                                            <div class="marginTopBottom-xs">
                                                <div class="size__xxl___2M4oE fontSize-xl lineHeight-xl breakPointM-fontSize-xxl breakPointM-lineHeight-xxl color__black___2f0FY c-black weight__semibold___19uxy fontWeight-5 div">Drop your media files</div>
                                            </div>
                                            <p class="size__m___Wii-G fontSize-s lineHeight-s breakPointM-fontSize-m breakPointM-lineHeight-m color__silver___1GcWN c-silver">
                                                <span class="centered display-block" style="max-width: 200px;">
                                                You can drop multiple MP4s, JPEGs, PNGs or GIFs</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="media-items-container" *ngIf="props.showProjects == true">
                <div [sortablejs]="props.media" [sortablejsOptions]="options">
                    <div class="media-item media-cell" *ngFor="let m of props.media">
                        <div class="project-container project-cell text-center fixed-size-item-responsive">
                            <div class="hovereffect horizontal-vertical-center">
                                <div class="img-wrapper detail">
                                    <img *ngIf="isImage(m.frm_path)" class="representative" [src]="m.frm_path">
                                    <video *ngIf="isVideo(m.frm_path)" preload="auto" height="180" [attr.id]="getUuid(m.frm_path)" (click)="pauseVideo(m.frm_id)">
                                        <source [src]="m.frm_path" type="video/mp4">
                                    </video>
                                </div>

                                <div class="img-cover project-overlay" [hidden]="m.isUploading || m.isPlaying">
                                    <a class="menu-delete" (click)="deleteFile(m.frm_id)">
                                        <span class="fa fa-trash"></span>
                                    </a>
                                    
                                    <div class="menu-play-video" *ngIf="isVideo(m.frm_path)">
                                        <a (click)="playVideo(m.frm_id)">
                                            <img src="../../../../../assets/layout/icons/play-button-white.png" style="width: 30px; height: 30px"/>
                                        </a>
                                    </div>

                                    <a class="btn menu-edit btn-custom btn-outline btn-md" href="/video-studio/{{props.projectId}}" style="margin-top: 70px;">Edit</a>
                                </div>
                            </div>
                            <div class="media-item-footer">
                                <div *ngIf="m.isUploading" class="progress" style="margin-bottom: 0px;">
                                    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" [ngStyle]="{'width': m.uploadPercent}">
                                        {{m.uploadPercent}}
                                    </div>
                                </div>
                                <h4 class="project-title">{{ resolveFilename(m.frm_name) }}</h4>
                                <p class="project-desc" *ngIf="!m.isUploading">{{ m.frm_resolution ? m.frm_resolution.width + ' x ' + m.frm_resolution.height : '' }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="props.showProjects == false" style="width: fit-content; margin:auto">
                <div class="text-center">
                    <div>
                        <img class="representative" src="../../../../../assets/layout/icons/blurbiz_drag-and-drop.png" style="margin: 0 auto; width: 207px; height: 190px;">
                        <h4>Drop your media files here!</h4>
                        <p>or click “Add Media Files” to upload from your desktop</p>
                    </div>
                </div>
            </div>
        </ng5-files-drop>
        <div *ngIf="props.showProjects == null">
            <div class="text-center">
                <img src="../../../../../assets/layout/images/loading projects.gif">
            </div>
        </div>
    </div>
</div>

<div class="modalContent modalContentBlurAndDarken" [hidden]="!props.isPlayingProjectVideo">
    <div class="modalContentMask"></div>
    <div class="multipageDialog playDialog" *ngIf="props.isPlayingProjectVideo">
        <div class="multipageDialogPageWrapper">
            <div class="multipageDialogPage multipageDialogCurrentPage">
            <div class="play">
                <div class="playDialogFeaturePromo playBody">
                    <vg-player (onPlayerReady)="onPlayerReady($event)">
                        <vg-overlay-play></vg-overlay-play>
                        <vg-buffering></vg-buffering>

                        <vg-controls>
                            <vg-play-pause></vg-play-pause>
                    
                            <vg-time-display vgProperty="current" vgFormat="mm:ss"></vg-time-display>
                    
                            <vg-scrub-bar [vgSlider]="true">
                                <vg-scrub-bar-current-time [vgSlider]="true"></vg-scrub-bar-current-time>
                                <vg-scrub-bar-buffering-time></vg-scrub-bar-buffering-time>
                            </vg-scrub-bar>

                            <vg-time-display vgProperty="total" vgFormat="mm:ss"></vg-time-display>

                            <vg-mute></vg-mute>
                            <vg-volume></vg-volume>
                            <vg-fullscreen></vg-fullscreen>
                        </vg-controls>
                        <video [vgMedia]="media" #media preload="auto" name="media">
                            <source [src]="props.videoPath" type="video/mp4" *ngIf="props.videoPath != ''">
                        </video>
                    </vg-player>
                </div>
                <button class="buttonLink dialogMaskCloseButton playDialogCloseButton" (click)="onCloseModal()" style="opacity: 1; z-index: 1000; color: white">Close</button>
            </div>
            </div>
        </div>
    </div>
</div>
<div class="backdrop" [ngStyle]="{'display':props.displayDeleteFileModal}"></div>
<div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':props.displayDeleteFileModal}">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <span class="btn-close" (click)="cancelDeleteFileConfirm()" role="button" tabindex="0"></span>
                <h3 class="modal-title">Are you sure want to delete this file?</h3>
            </div>
            <div class="modal-footer">
                <button class="btn btn-custom btn-white with-border btn-md" (click)="cancelDeleteFileConfirm(); ">Cancel</button>
                <button class="btn btn-custom btn-orange btn-md" (click)="okDeleteFileConfirm(); ">Delete</button>
            </div>
        </div>
    </div>
</div>
<style>
    #holder.hover { border: 10px dashed #0c0; }
    #holder.hover .img-cover { display: none; }
    #holder img.representative { display: block; }
    progress { width: 100%; }
    progress:after { content: '%'; }
    .fail { background: #c00; padding: 2px; color: #fff; }
    .hidden { display: none !important;}
    
    .loader{
        top: 20%;
        left: 40%;
        position: absolute;
    }
    .backdrop{
        background-color:rgba(0,0,0,0.6);
        position: fixed;;
        top:0;
        left:0;
        width:100%;
        height:100vh;
    }
    
</style>


